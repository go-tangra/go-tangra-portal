# Generated with protoc-gen-openapi
# https://github.com/google/gnostic/tree/master/cmd/protoc-gen-openapi

openapi: 3.0.3
info:
    title: Echo Service API
    description: A simple echo service for testing dynamic module registration
    version: 1.0.0
    x-module-id: echo
    x-module-name: Echo Service
    x-module-icon: lucide:megaphone
paths:
    /v1/echo:
        post:
            tags:
                - EchoService
                - EchoService
            summary: Echo a message
            description: Returns the input message with a timestamp
            operationId: EchoService_Echo
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/EchoRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/EchoResponse'
            x-menu-ref: echo-messages
    /v1/health:
        get:
            tags:
                - EchoService
                - EchoService
            summary: Health check
            description: Returns the health status of the service
            operationId: EchoService_HealthCheck
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HealthCheckResponse'
    /v1/messages:
        get:
            tags:
                - EchoService
                - EchoService
            summary: List all messages
            description: Returns a paginated list of stored messages
            operationId: EchoService_ListMessages
            parameters:
                - name: pageSize
                  in: query
                  schema:
                    type: integer
                    format: int32
                - name: page
                  in: query
                  schema:
                    type: integer
                    format: int32
                - name: filter
                  in: query
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListMessagesResponse'
            x-menu-ref: echo-messages
        post:
            tags:
                - EchoService
                - EchoService
            summary: Create a new message
            description: Creates and stores a new message
            operationId: EchoService_CreateMessage
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateMessageRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateMessageResponse'
            x-menu-ref: echo-messages
    /v1/messages/{id}:
        get:
            tags:
                - EchoService
                - EchoService
            summary: Get a message by ID
            description: Returns a specific message
            operationId: EchoService_GetMessage
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetMessageResponse'
        delete:
            tags:
                - EchoService
                - EchoService
            summary: Delete a message
            description: Deletes a message by ID
            operationId: EchoService_DeleteMessage
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/DeleteMessageResponse'
components:
    schemas:
        CreateMessageRequest:
            type: object
            properties:
                content:
                    type: string
                author:
                    type: string
                metadata:
                    type: object
                    additionalProperties:
                        type: string
            description: CreateMessageRequest is the request for creating a message
        CreateMessageResponse:
            type: object
            properties:
                message:
                    $ref: '#/components/schemas/Message'
            description: CreateMessageResponse is the response for creating a message
        DeleteMessageResponse:
            type: object
            properties:
                success:
                    type: boolean
            description: DeleteMessageResponse is the response for deleting a message
        EchoRequest:
            type: object
            properties:
                message:
                    type: string
            description: EchoRequest contains the message to echo
        EchoResponse:
            type: object
            properties:
                message:
                    type: string
                timestamp:
                    type: string
                    format: date-time
            description: EchoResponse contains the echoed message
        GetMessageResponse:
            type: object
            properties:
                message:
                    $ref: '#/components/schemas/Message'
            description: GetMessageResponse is the response for getting a single message
        HealthCheckResponse:
            type: object
            properties:
                status:
                    type: string
                version:
                    type: string
                timestamp:
                    type: string
                    format: date-time
            description: HealthCheckResponse contains the health status
        ListMessagesResponse:
            type: object
            properties:
                messages:
                    type: array
                    items:
                        $ref: '#/components/schemas/Message'
                total:
                    type: integer
                    format: int32
                page:
                    type: integer
                    format: int32
                pageSize:
                    type: integer
                    format: int32
            description: ListMessagesResponse contains a list of messages
        Message:
            type: object
            properties:
                id:
                    type: string
                content:
                    type: string
                author:
                    type: string
                createdAt:
                    type: string
                    format: date-time
                metadata:
                    type: object
                    additionalProperties:
                        type: string
            description: Message represents a stored message
tags:
    - name: EchoService
x-menus:
    - id: echo
      parent_id: null
      type: CATALOG
      name: EchoModule
      path: /echo
      icon: lucide:megaphone
      order: 500
      authority:
        - platform:admin
        - tenant:manager
    - id: echo-messages
      parent_id: echo
      type: MENU
      name: Messages
      path: messages
      component: modules/echo/messages/index.vue
      icon: lucide:message-square
      order: 1
      authority:
        - platform:admin
        - tenant:manager
