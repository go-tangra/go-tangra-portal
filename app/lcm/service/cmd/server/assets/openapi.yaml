# Generated with protoc-gen-openapi
# https://github.com/google/gnostic/tree/master/cmd/protoc-gen-openapi

openapi: 3.0.3
info:
    title: ""
    version: 0.0.1
paths:
    /api/v1/lcm/statistics:
        get:
            tags:
                - LcmStatisticsService
            description: GetStatistics returns comprehensive statistics about the LCM system
            operationId: LcmStatisticsService_GetStatistics
            parameters:
                - name: expireSoonDays
                  in: query
                  description: 'Number of days to consider for "expire soon" certificates (default: 30)'
                  schema:
                    type: integer
                    format: int32
                - name: recentErrorsLimit
                  in: query
                  description: 'Number of recent errors to return (default: 10)'
                  schema:
                    type: integer
                    format: int32
                - name: tenantId
                  in: query
                  description: Filter by specific tenant ID (optional, admin only)
                  schema:
                    type: integer
                    format: uint32
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetStatisticsResponse'
    /api/v1/lcm/statistics/tenant/{tenantId}:
        get:
            tags:
                - LcmStatisticsService
            description: GetTenantStatistics returns statistics for a specific tenant
            operationId: LcmStatisticsService_GetTenantStatistics
            parameters:
                - name: tenantId
                  in: path
                  description: Tenant ID to get statistics for
                  required: true
                  schema:
                    type: integer
                    format: uint32
                - name: expireSoonDays
                  in: query
                  description: 'Number of days for expire soon calculation (default: 30)'
                  schema:
                    type: integer
                    format: int32
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/TenantStatistics'
    /v1/certificate-jobs:
        get:
            tags:
                - LcmCertificateJobService
            description: List certificate jobs for the authenticated client
            operationId: LcmCertificateJobService_ListJobs
            parameters:
                - name: status
                  in: query
                  schema:
                    enum:
                        - CERTIFICATE_JOB_STATUS_UNSPECIFIED
                        - CERTIFICATE_JOB_STATUS_PENDING
                        - CERTIFICATE_JOB_STATUS_PROCESSING
                        - CERTIFICATE_JOB_STATUS_COMPLETED
                        - CERTIFICATE_JOB_STATUS_FAILED
                        - CERTIFICATE_JOB_STATUS_CANCELLED
                    type: string
                    format: enum
                - name: page
                  in: query
                  schema:
                    type: integer
                    format: uint32
                - name: pageSize
                  in: query
                  schema:
                    type: integer
                    format: uint32
                - name: issuerName
                  in: query
                  schema:
                    type: string
                - name: tenantId
                  in: query
                  schema:
                    type: integer
                    format: uint32
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListJobsResponse'
        post:
            tags:
                - LcmCertificateJobService
            description: Request a new certificate (async - returns job ID immediately)
            operationId: LcmCertificateJobService_RequestCertificate
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/RequestCertificateRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/RequestCertificateResponse'
    /v1/certificate-jobs/{jobId}/cancel:
        post:
            tags:
                - LcmCertificateJobService
            description: Cancel a pending certificate job
            operationId: LcmCertificateJobService_CancelJob
            parameters:
                - name: jobId
                  in: path
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content: {}
    /v1/certificate-jobs/{jobId}/result:
        get:
            tags:
                - LcmCertificateJobService
            description: Get the result of a completed certificate job
            operationId: LcmCertificateJobService_GetJobResult
            parameters:
                - name: jobId
                  in: path
                  required: true
                  schema:
                    type: string
                - name: includePrivateKey
                  in: query
                  description: Whether to include the private key in the response
                  schema:
                    type: boolean
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetJobResultResponse'
    /v1/certificate-jobs/{jobId}/status:
        get:
            tags:
                - LcmCertificateJobService
            description: Get the status of a certificate job
            operationId: LcmCertificateJobService_GetJobStatus
            parameters:
                - name: jobId
                  in: path
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetJobStatusResponse'
    /v1/certificate-permissions:
        post:
            tags:
                - CertificatePermissionService
            description: Grant permission to another client to access a certificate
            operationId: CertificatePermissionService_GrantPermission
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/GrantPermissionRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GrantPermissionResponse'
    /v1/certificate-permissions/accessible:
        get:
            tags:
                - CertificatePermissionService
            description: List all certificates accessible to the authenticated client (grants received)
            operationId: CertificatePermissionService_ListAccessibleCertificates
            parameters:
                - name: permissionType
                  in: query
                  description: Filter by permission type
                  schema:
                    enum:
                        - PERMISSION_TYPE_UNSPECIFIED
                        - PERMISSION_TYPE_READ
                        - PERMISSION_TYPE_DOWNLOAD
                        - PERMISSION_TYPE_FULL
                    type: string
                    format: enum
                - name: includeExpired
                  in: query
                  description: Include expired permissions
                  schema:
                    type: boolean
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListAccessibleCertificatesResponse'
    /v1/certificate-permissions/{certificateId}:
        get:
            tags:
                - CertificatePermissionService
            description: List all permissions for a certificate (as owner)
            operationId: CertificatePermissionService_ListPermissions
            parameters:
                - name: certificateId
                  in: path
                  description: ID of the certificate (caller must be the owner)
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListPermissionsResponse'
    /v1/certificate-permissions/{certificateId}/check:
        get:
            tags:
                - CertificatePermissionService
            description: Check if the authenticated client has permission to access a certificate
            operationId: CertificatePermissionService_CheckPermission
            parameters:
                - name: certificateId
                  in: path
                  description: ID of the certificate to check
                  required: true
                  schema:
                    type: string
                - name: requiredPermission
                  in: query
                  description: Required permission type
                  schema:
                    enum:
                        - PERMISSION_TYPE_UNSPECIFIED
                        - PERMISSION_TYPE_READ
                        - PERMISSION_TYPE_DOWNLOAD
                        - PERMISSION_TYPE_FULL
                    type: string
                    format: enum
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CheckPermissionResponse'
    /v1/certificate-permissions/{certificateId}/grantees/{granteeClientId}:
        delete:
            tags:
                - CertificatePermissionService
            description: Revoke a previously granted permission
            operationId: CertificatePermissionService_RevokePermission
            parameters:
                - name: certificateId
                  in: path
                  description: ID of the certificate
                  required: true
                  schema:
                    type: string
                - name: granteeClientId
                  in: path
                  description: Client ID of the grantee whose permission is being revoked
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content: {}
    /v1/dns-providers:
        get:
            tags:
                - LcmIssuerService
            description: DNS challenge provider information
            operationId: LcmIssuerService_ListDnsProviders
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListDnsProvidersResponse'
    /v1/dns-providers/{name}:
        get:
            tags:
                - LcmIssuerService
            operationId: LcmIssuerService_GetDnsProviderInfo
            parameters:
                - name: name
                  in: path
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/DnsProviderInfo'
    /v1/health:
        get:
            tags:
                - SystemService
            operationId: SystemService_HealthCheck
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HealthCheckResponse'
    /v1/issuers:
        get:
            tags:
                - LcmIssuerService
            description: ACME issuer management (authenticated)
            operationId: LcmIssuerService_ListIssuers
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListIssuersResponse'
        post:
            tags:
                - LcmIssuerService
            operationId: LcmIssuerService_CreateIssuer
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateIssuerRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateIssuerResponse'
    /v1/issuers/{issuerName}:
        get:
            tags:
                - LcmIssuerService
            operationId: LcmIssuerService_GetIssuerInfo
            parameters:
                - name: issuerName
                  in: path
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetIssuerInfoResponse'
    /v1/issuers/{name}:
        put:
            tags:
                - LcmIssuerService
            operationId: LcmIssuerService_UpdateIssuer
            parameters:
                - name: name
                  in: path
                  required: true
                  schema:
                    type: string
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/UpdateIssuerRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content: {}
        delete:
            tags:
                - LcmIssuerService
            operationId: LcmIssuerService_DeleteIssuer
            parameters:
                - name: name
                  in: path
                  required: true
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content: {}
    /v1/tenant-secrets:
        get:
            tags:
                - TenantSecretService
            description: List tenant secrets
            operationId: TenantSecretService_ListTenantSecrets
            parameters:
                - name: tenantId
                  in: query
                  schema:
                    type: integer
                    format: uint32
                - name: status
                  in: query
                  schema:
                    enum:
                        - TENANT_SECRET_STATUS_UNSPECIFIED
                        - TENANT_SECRET_STATUS_ACTIVE
                        - TENANT_SECRET_STATUS_DISABLED
                    type: string
                    format: enum
                - name: page
                  in: query
                  schema:
                    type: integer
                    format: uint32
                - name: pageSize
                  in: query
                  schema:
                    type: integer
                    format: uint32
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListTenantSecretsResponse'
        post:
            tags:
                - TenantSecretService
            description: Create a new tenant secret
            operationId: TenantSecretService_CreateTenantSecret
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateTenantSecretRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateTenantSecretResponse'
    /v1/tenant-secrets/{id}:
        get:
            tags:
                - TenantSecretService
            description: Get a tenant secret by ID
            operationId: TenantSecretService_GetTenantSecret
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: integer
                    format: uint32
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetTenantSecretResponse'
        put:
            tags:
                - TenantSecretService
            description: Update a tenant secret
            operationId: TenantSecretService_UpdateTenantSecret
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: integer
                    format: uint32
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/UpdateTenantSecretRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/UpdateTenantSecretResponse'
        delete:
            tags:
                - TenantSecretService
            description: Delete a tenant secret
            operationId: TenantSecretService_DeleteTenantSecret
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: integer
                    format: uint32
            responses:
                "200":
                    description: OK
                    content: {}
    /v1/tenant-secrets/{id}/rotate:
        post:
            tags:
                - TenantSecretService
            description: Rotate a tenant secret
            operationId: TenantSecretService_RotateTenantSecret
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: integer
                    format: uint32
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/RotateTenantSecretRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/RotateTenantSecretResponse'
components:
    schemas:
        AccessibleCertificate:
            type: object
            properties:
                certificateId:
                    type: string
                ownerClientId:
                    type: string
                commonName:
                    type: string
                dnsNames:
                    type: array
                    items:
                        type: string
                issuerName:
                    type: string
                permissionType:
                    enum:
                        - PERMISSION_TYPE_UNSPECIFIED
                        - PERMISSION_TYPE_READ
                        - PERMISSION_TYPE_DOWNLOAD
                        - PERMISSION_TYPE_FULL
                    type: string
                    format: enum
                grantedBy:
                    type: string
                expiresAt:
                    type: string
                    format: date-time
                certificateExpiresAt:
                    type: string
                    format: date-time
                grantedAt:
                    type: string
                    format: date-time
            description: Certificate accessible via permission grant
        AcmeIssuer:
            type: object
            properties:
                email:
                    type: string
                endpoint:
                    type: string
                keyType:
                    type: string
                keySize:
                    type: integer
                    format: int32
                maxRetries:
                    type: integer
                    format: int32
                baseDelay:
                    type: string
                challengeType:
                    enum:
                        - HTTP
                        - DNS
                    type: string
                    format: enum
                providerName:
                    type: string
                providerConfig:
                    type: object
                    additionalProperties:
                        type: string
                eabKid:
                    type: string
                    description: External Account Binding (EAB) for ACME providers that require it (e.g., ZeroSSL, Google Trust Services)
                eabHmacKey:
                    type: string
        CertificateJobInfo:
            type: object
            properties:
                jobId:
                    type: string
                status:
                    enum:
                        - CERTIFICATE_JOB_STATUS_UNSPECIFIED
                        - CERTIFICATE_JOB_STATUS_PENDING
                        - CERTIFICATE_JOB_STATUS_PROCESSING
                        - CERTIFICATE_JOB_STATUS_COMPLETED
                        - CERTIFICATE_JOB_STATUS_FAILED
                        - CERTIFICATE_JOB_STATUS_CANCELLED
                    type: string
                    format: enum
                issuerName:
                    type: string
                issuerType:
                    type: string
                commonName:
                    type: string
                createdAt:
                    type: string
                    format: date-time
                completedAt:
                    type: string
                    format: date-time
                errorMessage:
                    type: string
            description: Job summary info for listing
        CertificatePermission:
            type: object
            properties:
                id:
                    type: integer
                    format: uint32
                certificateId:
                    type: string
                granteeClientId:
                    type: integer
                    format: uint32
                granteeClientName:
                    type: string
                permissionType:
                    enum:
                        - PERMISSION_TYPE_UNSPECIFIED
                        - PERMISSION_TYPE_READ
                        - PERMISSION_TYPE_DOWNLOAD
                        - PERMISSION_TYPE_FULL
                    type: string
                    format: enum
                grantedBy:
                    type: string
                expiresAt:
                    type: string
                    format: date-time
                createdAt:
                    type: string
                    format: date-time
                updatedAt:
                    type: string
                    format: date-time
            description: CertificatePermission represents a permission grant
        CertificateStatistics:
            type: object
            properties:
                totalCount:
                    type: string
                    description: Total number of certificates
                activeCount:
                    type: string
                    description: Number of active certificates
                expiredCount:
                    type: string
                    description: Number of expired certificates
                revokedCount:
                    type: string
                    description: Number of revoked certificates
                suspendedCount:
                    type: string
                    description: Number of suspended certificates
                expireSoonCount:
                    type: string
                    description: Number of certificates expiring soon
                expireSoonDays:
                    type: integer
                    description: Days threshold used for expire soon calculation
                    format: int32
                wildcardCount:
                    type: string
                    description: Number of wildcard certificates
                byType:
                    allOf:
                        - $ref: '#/components/schemas/CertificateTypeBreakdown'
                    description: Certificates by type
                byIssuer:
                    type: array
                    items:
                        $ref: '#/components/schemas/IssuerCertificateCount'
                    description: Certificates grouped by issuer
            description: CertificateStatistics contains statistics about certificates
        CertificateTypeBreakdown:
            type: object
            properties:
                clientCerts:
                    type: string
                    description: Number of client certificates
                internalCerts:
                    type: string
                    description: Number of internal certificates
                caCerts:
                    type: string
                    description: Number of CA certificates
            description: CertificateTypeBreakdown provides certificate counts by type
        CheckPermissionResponse:
            type: object
            properties:
                hasPermission:
                    type: boolean
                isOwner:
                    type: boolean
                    description: True if the caller owns the certificate (not via grant)
                grantedPermission:
                    enum:
                        - PERMISSION_TYPE_UNSPECIFIED
                        - PERMISSION_TYPE_READ
                        - PERMISSION_TYPE_DOWNLOAD
                        - PERMISSION_TYPE_FULL
                    type: string
                    description: The actual permission level if granted (may be higher than required)
                    format: enum
            description: Response for permission check
        ClientStatistics:
            type: object
            properties:
                totalCount:
                    type: string
                    description: Total number of registered clients
                activeCount:
                    type: string
                    description: Number of active clients
                disabledCount:
                    type: string
                    description: Number of disabled clients
                suspendedCount:
                    type: string
                    description: Number of suspended clients
                byStatus:
                    type: object
                    additionalProperties:
                        type: string
                    description: Clients grouped by status
            description: ClientStatistics contains statistics about LCM clients
        CreateIssuerRequest:
            type: object
            properties:
                name:
                    type: string
                type:
                    type: string
                keyType:
                    type: string
                description:
                    type: string
                selfIssuer:
                    $ref: '#/components/schemas/SelfIssuer'
                acmeIssuer:
                    $ref: '#/components/schemas/AcmeIssuer'
                status:
                    enum:
                        - ISSUER_STATUS_UNSPECIFIED
                        - ISSUER_STATUS_ACTIVE
                        - ISSUER_STATUS_DISABLED
                        - ISSUER_STATUS_ERROR
                    type: string
                    format: enum
            description: Issuer creation and management messages
        CreateIssuerResponse:
            type: object
            properties:
                issuer:
                    $ref: '#/components/schemas/IssuerInfo'
        CreateTenantSecretRequest:
            required:
                - tenantId
                - secret
            type: object
            properties:
                tenantId:
                    type: integer
                    format: uint32
                secret:
                    type: string
                description:
                    type: string
                expiresAt:
                    type: string
                    format: date-time
            description: Create a new tenant secret
        CreateTenantSecretResponse:
            type: object
            properties:
                tenantSecret:
                    $ref: '#/components/schemas/TenantSecret'
        DnsProviderInfo:
            type: object
            properties:
                name:
                    type: string
                description:
                    type: string
                requiredFields:
                    type: array
                    items:
                        type: string
                optionalFields:
                    type: array
                    items:
                        type: string
        GetIssuerInfoResponse:
            type: object
            properties:
                issuer:
                    $ref: '#/components/schemas/IssuerInfo'
        GetJobResultResponse:
            type: object
            properties:
                jobId:
                    type: string
                status:
                    enum:
                        - CERTIFICATE_JOB_STATUS_UNSPECIFIED
                        - CERTIFICATE_JOB_STATUS_PENDING
                        - CERTIFICATE_JOB_STATUS_PROCESSING
                        - CERTIFICATE_JOB_STATUS_COMPLETED
                        - CERTIFICATE_JOB_STATUS_FAILED
                        - CERTIFICATE_JOB_STATUS_CANCELLED
                    type: string
                    format: enum
                certificatePem:
                    type: string
                    description: Certificate data (only present if job is completed)
                caCertificatePem:
                    type: string
                privateKeyPem:
                    type: string
                serialNumber:
                    type: string
                expiresAt:
                    type: string
                    format: date-time
                issuedAt:
                    type: string
                    format: date-time
                errorMessage:
                    type: string
                    description: Error info (only present if job failed)
                csrPem:
                    type: string
                    description: Certificate request data
                keyType:
                    type: string
                keySize:
                    type: integer
                    format: int32
                serverGeneratedKey:
                    type: boolean
            description: Job result response
        GetJobStatusResponse:
            type: object
            properties:
                jobId:
                    type: string
                status:
                    enum:
                        - CERTIFICATE_JOB_STATUS_UNSPECIFIED
                        - CERTIFICATE_JOB_STATUS_PENDING
                        - CERTIFICATE_JOB_STATUS_PROCESSING
                        - CERTIFICATE_JOB_STATUS_COMPLETED
                        - CERTIFICATE_JOB_STATUS_FAILED
                        - CERTIFICATE_JOB_STATUS_CANCELLED
                    type: string
                    format: enum
                issuerName:
                    type: string
                issuerType:
                    type: string
                commonName:
                    type: string
                dnsNames:
                    type: array
                    items:
                        type: string
                ipAddresses:
                    type: array
                    items:
                        type: string
                errorMessage:
                    type: string
                createdAt:
                    type: string
                    format: date-time
                completedAt:
                    type: string
                    format: date-time
            description: Job status response
        GetStatisticsResponse:
            type: object
            properties:
                certificates:
                    allOf:
                        - $ref: '#/components/schemas/CertificateStatistics'
                    description: 'Overall certificate statistics (DEPRECATED: use issued_certificates and mtls_certificates instead)'
                clients:
                    allOf:
                        - $ref: '#/components/schemas/ClientStatistics'
                    description: Client statistics
                issuers:
                    allOf:
                        - $ref: '#/components/schemas/IssuerStatistics'
                    description: Issuer statistics
                jobs:
                    allOf:
                        - $ref: '#/components/schemas/JobStatistics'
                    description: Certificate job statistics
                recentErrors:
                    type: array
                    items:
                        $ref: '#/components/schemas/RecentError'
                    description: Recent errors/failures
                tenantBreakdown:
                    type: array
                    items:
                        $ref: '#/components/schemas/TenantStatistics'
                    description: Per-tenant breakdown (only for platform admin requests)
                generatedAt:
                    type: string
                    description: Statistics generation timestamp
                    format: date-time
                issuedCertificates:
                    allOf:
                        - $ref: '#/components/schemas/IssuedCertificateStatistics'
                    description: Issued certificate statistics (certificates issued to clients - the main certificates)
                mtlsCertificates:
                    allOf:
                        - $ref: '#/components/schemas/MtlsCertificateStatistics'
                    description: MTLS certificate statistics (certificates used for mTLS authentication - internal use)
            description: GetStatisticsResponse is the response message for GetStatistics
        GetTenantSecretResponse:
            type: object
            properties:
                tenantSecret:
                    $ref: '#/components/schemas/TenantSecret'
        GrantPermissionRequest:
            required:
                - certificateId
                - granteeClientId
                - permissionType
            type: object
            properties:
                certificateId:
                    type: string
                    description: ID of the certificate to share
                granteeClientId:
                    type: string
                    description: Client ID of the grantee (the client receiving access)
                permissionType:
                    enum:
                        - PERMISSION_TYPE_UNSPECIFIED
                        - PERMISSION_TYPE_READ
                        - PERMISSION_TYPE_DOWNLOAD
                        - PERMISSION_TYPE_FULL
                    type: string
                    description: Type of permission to grant
                    format: enum
                expiresAt:
                    type: string
                    description: Optional expiration time for the permission
                    format: date-time
            description: Request to grant permission
        GrantPermissionResponse:
            type: object
            properties:
                permission:
                    $ref: '#/components/schemas/CertificatePermission'
            description: Response after granting permission
        HealthCheckResponse:
            type: object
            properties:
                status:
                    type: boolean
                message:
                    type: string
        IssuedCertificateStatistics:
            type: object
            properties:
                totalCount:
                    type: string
                    description: Total number of issued certificates
                activeCount:
                    type: string
                    description: Number of active certificates (status=issued)
                expiredCount:
                    type: string
                    description: Number of expired certificates
                revokedCount:
                    type: string
                    description: Number of revoked certificates
                pendingCount:
                    type: string
                    description: Number of pending certificates
                processingCount:
                    type: string
                    description: Number of certificates being processed
                failedCount:
                    type: string
                    description: Number of failed certificate requests
                expireSoonCount:
                    type: string
                    description: Number of certificates expiring soon
                expireSoonDays:
                    type: integer
                    description: Days threshold used for expire soon calculation
                    format: int32
                wildcardCount:
                    type: string
                    description: Number of wildcard certificates
                autoRenewEnabledCount:
                    type: string
                    description: Number of certificates with auto-renewal enabled
                byIssuerType:
                    type: object
                    additionalProperties:
                        type: string
                    description: Certificates grouped by issuer type
            description: |-
                IssuedCertificateStatistics contains statistics about certificates issued to clients
                 These are the main certificates that users request and manage
        IssuerCertificateCount:
            type: object
            properties:
                issuerName:
                    type: string
                    description: Issuer name
                issuerType:
                    type: string
                    description: Issuer type (self-signed, acme)
                totalCount:
                    type: string
                    description: Total certificates issued by this issuer
                activeCount:
                    type: string
                    description: Active certificates
                expiredCount:
                    type: string
                    description: Expired certificates
                revokedCount:
                    type: string
                    description: Revoked certificates
            description: IssuerCertificateCount represents certificate count for an issuer
        IssuerInfo:
            type: object
            properties:
                name:
                    type: string
                type:
                    type: string
                status:
                    enum:
                        - ISSUER_STATUS_UNSPECIFIED
                        - ISSUER_STATUS_ACTIVE
                        - ISSUER_STATUS_DISABLED
                        - ISSUER_STATUS_ERROR
                    type: string
                    format: enum
                description:
                    type: string
                config:
                    type: object
                    additionalProperties:
                        type: string
                createTime:
                    type: string
                    format: date-time
                updateTime:
                    type: string
                    format: date-time
        IssuerStatistics:
            type: object
            properties:
                totalCount:
                    type: string
                    description: Total number of issuers
                activeCount:
                    type: string
                    description: Number of active issuers
                disabledCount:
                    type: string
                    description: Number of disabled issuers
                errorCount:
                    type: string
                    description: Number of issuers in error state
                byType:
                    type: object
                    additionalProperties:
                        type: string
                    description: Issuers by type
            description: IssuerStatistics contains statistics about certificate issuers
        JobStatistics:
            type: object
            properties:
                totalCount:
                    type: string
                    description: Total number of jobs
                pendingCount:
                    type: string
                    description: Number of pending jobs
                processingCount:
                    type: string
                    description: Number of processing jobs
                completedCount:
                    type: string
                    description: Number of completed jobs
                failedCount:
                    type: string
                    description: Number of failed jobs
                cancelledCount:
                    type: string
                    description: Number of cancelled jobs
                last24Hours:
                    allOf:
                        - $ref: '#/components/schemas/JobTimeBreakdown'
                    description: Jobs in the last 24 hours
                last7Days:
                    allOf:
                        - $ref: '#/components/schemas/JobTimeBreakdown'
                    description: Jobs in the last 7 days
            description: JobStatistics contains statistics about certificate jobs
        JobTimeBreakdown:
            type: object
            properties:
                total:
                    type: string
                    description: Total jobs in period
                succeeded:
                    type: string
                    description: Successful jobs
                failed:
                    type: string
                    description: Failed jobs
                successRate:
                    type: number
                    description: Success rate percentage (0-100)
                    format: double
            description: JobTimeBreakdown provides job counts within a time period
        ListAccessibleCertificatesResponse:
            type: object
            properties:
                certificates:
                    type: array
                    items:
                        $ref: '#/components/schemas/AccessibleCertificate'
                total:
                    type: integer
                    format: uint32
            description: Response listing accessible certificates
        ListDnsProvidersResponse:
            type: object
            properties:
                providers:
                    type: array
                    items:
                        $ref: '#/components/schemas/DnsProviderInfo'
            description: DNS Provider messages for DNS challenge support
        ListIssuersResponse:
            type: object
            properties:
                issuers:
                    type: array
                    items:
                        $ref: '#/components/schemas/IssuerInfo'
        ListJobsResponse:
            type: object
            properties:
                jobs:
                    type: array
                    items:
                        $ref: '#/components/schemas/CertificateJobInfo'
                total:
                    type: integer
                    format: uint32
            description: List jobs response
        ListPermissionsResponse:
            type: object
            properties:
                permissions:
                    type: array
                    items:
                        $ref: '#/components/schemas/CertificatePermission'
                total:
                    type: integer
                    format: uint32
            description: Response listing all permissions for a certificate
        ListTenantSecretsResponse:
            type: object
            properties:
                items:
                    type: array
                    items:
                        $ref: '#/components/schemas/TenantSecret'
                total:
                    type: string
        MtlsCertificateStatistics:
            type: object
            properties:
                totalCount:
                    type: string
                    description: Total number of mTLS certificates
                activeCount:
                    type: string
                    description: Number of active mTLS certificates
                expiredCount:
                    type: string
                    description: Number of expired mTLS certificates
                revokedCount:
                    type: string
                    description: Number of revoked mTLS certificates
                suspendedCount:
                    type: string
                    description: Number of suspended mTLS certificates
                expireSoonCount:
                    type: string
                    description: Number of mTLS certificates expiring soon
                expireSoonDays:
                    type: integer
                    description: Days threshold used for expire soon calculation
                    format: int32
                byType:
                    allOf:
                        - $ref: '#/components/schemas/CertificateTypeBreakdown'
                    description: Certificates by type (client, internal)
            description: |-
                MtlsCertificateStatistics contains statistics about mTLS authentication certificates
                 These are internal certificates used for service-to-service authentication
        RecentError:
            type: object
            properties:
                occurredAt:
                    type: string
                    description: Error timestamp
                    format: date-time
                jobId:
                    type: string
                    description: Job ID that failed
                clientId:
                    type: string
                    description: Client ID that requested the certificate
                commonName:
                    type: string
                    description: Common name of the requested certificate
                issuerName:
                    type: string
                    description: Issuer name
                errorMessage:
                    type: string
                    description: Error message
                tenantId:
                    type: integer
                    description: Tenant ID
                    format: uint32
            description: RecentError represents a recent certificate issuance failure
        RequestCertificateRequest:
            required:
                - issuerName
                - commonName
            type: object
            properties:
                issuerName:
                    type: string
                    description: Issuer to use for certificate generation
                commonName:
                    type: string
                    description: Common name for the certificate
                dnsNames:
                    type: array
                    items:
                        type: string
                    description: DNS names for Subject Alternative Names
                ipAddresses:
                    type: array
                    items:
                        type: string
                    description: IP addresses for Subject Alternative Names
                csrPem:
                    type: string
                    description: Optional CSR (if not provided, key will be generated)
                keyType:
                    type: string
                    description: Key type (only used if CSR is not provided)
                keySize:
                    type: integer
                    description: Key size in bits (only used if CSR is not provided)
                    format: int32
                validityDays:
                    type: integer
                    description: Certificate validity in days
                    format: int32
                metadata:
                    type: object
                    additionalProperties:
                        type: string
                    description: Custom metadata
            description: Request to create a new certificate
        RequestCertificateResponse:
            type: object
            properties:
                jobId:
                    type: string
                status:
                    enum:
                        - CERTIFICATE_JOB_STATUS_UNSPECIFIED
                        - CERTIFICATE_JOB_STATUS_PENDING
                        - CERTIFICATE_JOB_STATUS_PROCESSING
                        - CERTIFICATE_JOB_STATUS_COMPLETED
                        - CERTIFICATE_JOB_STATUS_FAILED
                        - CERTIFICATE_JOB_STATUS_CANCELLED
                    type: string
                    format: enum
                message:
                    type: string
            description: Response with job ID for tracking
        RotateTenantSecretRequest:
            required:
                - id
                - newSecret
            type: object
            properties:
                id:
                    type: integer
                    format: uint32
                newSecret:
                    type: string
                disableOld:
                    type: boolean
            description: Rotate a tenant secret (create new secret, optionally disable old)
        RotateTenantSecretResponse:
            type: object
            properties:
                newSecret:
                    $ref: '#/components/schemas/TenantSecret'
                oldSecret:
                    $ref: '#/components/schemas/TenantSecret'
        SelfIssuer:
            type: object
            properties:
                commonName:
                    type: string
                dnsNames:
                    type: array
                    items:
                        type: string
                ipAddresses:
                    type: array
                    items:
                        type: string
                caCommonName:
                    type: string
                    description: CA certificate configuration
                caOrganization:
                    type: string
                caOrganizationalUnit:
                    type: string
                caCountry:
                    type: string
                caProvince:
                    type: string
                caLocality:
                    type: string
                caValidityDays:
                    type: integer
                    format: int32
        TenantSecret:
            type: object
            properties:
                id:
                    type: integer
                    format: uint32
                tenantId:
                    type: integer
                    format: uint32
                description:
                    type: string
                status:
                    enum:
                        - TENANT_SECRET_STATUS_UNSPECIFIED
                        - TENANT_SECRET_STATUS_ACTIVE
                        - TENANT_SECRET_STATUS_DISABLED
                    type: string
                    format: enum
                expiresAt:
                    type: string
                    format: date-time
                createdBy:
                    type: integer
                    format: uint32
                updatedBy:
                    type: integer
                    format: uint32
                createTime:
                    type: string
                    format: date-time
                updateTime:
                    type: string
                    format: date-time
            description: TenantSecret entity - maps shared secrets to tenants
        TenantStatistics:
            type: object
            properties:
                tenantId:
                    type: integer
                    description: Tenant ID
                    format: uint32
                certificates:
                    allOf:
                        - $ref: '#/components/schemas/CertificateStatistics'
                    description: Certificate statistics for this tenant (DEPRECATED)
                clients:
                    allOf:
                        - $ref: '#/components/schemas/ClientStatistics'
                    description: Client statistics for this tenant
                issuers:
                    allOf:
                        - $ref: '#/components/schemas/IssuerStatistics'
                    description: Issuer statistics for this tenant
                jobs:
                    allOf:
                        - $ref: '#/components/schemas/JobStatistics'
                    description: Job statistics for this tenant
                issuedCertificates:
                    allOf:
                        - $ref: '#/components/schemas/IssuedCertificateStatistics'
                    description: Issued certificate statistics for this tenant
                mtlsCertificates:
                    allOf:
                        - $ref: '#/components/schemas/MtlsCertificateStatistics'
                    description: MTLS certificate statistics for this tenant
            description: TenantStatistics provides statistics for a specific tenant
        UpdateIssuerRequest:
            type: object
            properties:
                name:
                    type: string
                type:
                    type: string
                keyType:
                    type: string
                description:
                    type: string
                selfIssuer:
                    $ref: '#/components/schemas/SelfIssuer'
                acmeIssuer:
                    $ref: '#/components/schemas/AcmeIssuer'
                status:
                    enum:
                        - ISSUER_STATUS_UNSPECIFIED
                        - ISSUER_STATUS_ACTIVE
                        - ISSUER_STATUS_DISABLED
                        - ISSUER_STATUS_ERROR
                    type: string
                    format: enum
        UpdateTenantSecretRequest:
            required:
                - id
            type: object
            properties:
                id:
                    type: integer
                    format: uint32
                description:
                    type: string
                status:
                    enum:
                        - TENANT_SECRET_STATUS_UNSPECIFIED
                        - TENANT_SECRET_STATUS_ACTIVE
                        - TENANT_SECRET_STATUS_DISABLED
                    type: string
                    format: enum
                expiresAt:
                    type: string
                    format: date-time
            description: Update a tenant secret (description, status, expiry only - secret cannot be updated)
        UpdateTenantSecretResponse:
            type: object
            properties:
                tenantSecret:
                    $ref: '#/components/schemas/TenantSecret'
tags:
    - name: CertificatePermissionService
      description: Certificate Permission Service - manages certificate access grants between clients
    - name: LcmCertificateJobService
      description: Certificate Job Service - handles async certificate issuance
    - name: LcmIssuerService
    - name: LcmStatisticsService
      description: LCM Statistics Service provides aggregated statistics about the certificate lifecycle management system
    - name: SystemService
    - name: TenantSecretService
      description: TenantSecret Admin Service

x-menus:
  - id: lcm
    parent_id: null
    type: CATALOG
    name: LCM
    path: /lcm
    icon: lucide:shield-check
    order: 200
    authority:
      - platform:admin
      - tenant:manager
  - id: lcm-certificates
    parent_id: lcm
    type: MENU
    name: Certificates
    path: certificate
    component: app/lcm/certificate/index.vue
    icon: lucide:file-badge
    order: 1
    authority:
      - platform:admin
      - tenant:manager
  - id: lcm-jobs
    parent_id: lcm
    type: MENU
    name: Certificate Jobs
    path: certificate-job
    component: app/lcm/certificate-job/index.vue
    icon: lucide:list-todo
    order: 2
    authority:
      - platform:admin
      - tenant:manager
  - id: lcm-issuers
    parent_id: lcm
    type: MENU
    name: Issuers
    path: issuer
    component: app/lcm/issuer/index.vue
    icon: lucide:stamp
    order: 3
    authority:
      - platform:admin
      - tenant:manager
  - id: lcm-permissions
    parent_id: lcm
    type: MENU
    name: Permissions
    path: certificate-permission
    component: app/lcm/certificate-permission/index.vue
    icon: lucide:key
    order: 4
    authority:
      - platform:admin
      - tenant:manager
  - id: lcm-tenant-secrets
    parent_id: lcm
    type: MENU
    name: Tenant Secrets
    path: tenant-secret
    component: app/lcm/tenant-secret/index.vue
    icon: lucide:lock
    order: 6
    authority:
      - platform:admin
      - tenant:manager
