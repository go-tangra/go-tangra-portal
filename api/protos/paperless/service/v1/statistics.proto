syntax = "proto3";

package paperless.service.v1;

import "google/api/annotations.proto";
import "google/protobuf/timestamp.proto";

// Paperless Statistics Service provides aggregated statistics about the document management system
service PaperlessStatisticsService {
  // GetStatistics returns comprehensive statistics about the Paperless system
  rpc GetStatistics (GetStatisticsRequest) returns (GetStatisticsResponse) {
    option (google.api.http) = {
      get: "/v1/statistics"
    };
  }
}

// GetStatisticsRequest is the request message for GetStatistics
message GetStatisticsRequest {}

// GetStatisticsResponse is the response message for GetStatistics
message GetStatisticsResponse {
  // Document statistics
  DocumentStatistics documents = 1;

  // Category statistics
  CategoryStatistics categories = 2;

  // Statistics generation timestamp
  google.protobuf.Timestamp generated_at = 10;
}

// DocumentStatistics contains statistics about documents
message DocumentStatistics {
  // Total number of documents
  int64 total_count = 1;

  // Documents grouped by status (active, archived, deleted)
  map<string, int64> by_status = 2;

  // Documents grouped by source (upload, email)
  map<string, int64> by_source = 3;

  // Documents grouped by processing status (pending, processing, completed, failed, skipped)
  map<string, int64> by_processing_status = 4;

  // Documents grouped by MIME type
  map<string, int64> by_mime_type = 5;

  // Total storage used in bytes
  int64 total_storage_bytes = 6;

  // Documents uploaded in the last 24 hours
  int64 recent_uploads_24h = 7;

  // Documents uploaded in the last 7 days
  int64 recent_uploads_7d = 8;
}

// CategoryStatistics contains statistics about categories
message CategoryStatistics {
  // Total number of categories
  int64 total_count = 1;
}
