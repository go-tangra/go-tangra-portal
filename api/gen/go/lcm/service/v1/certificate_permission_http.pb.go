// Code generated by protoc-gen-go-http. DO NOT EDIT.
// versions:
// - protoc-gen-go-http v2.9.2
// - protoc             (unknown)
// source: lcm/service/v1/certificate_permission.proto

package lcmV1

import (
	context "context"
	http "github.com/go-kratos/kratos/v2/transport/http"
	binding "github.com/go-kratos/kratos/v2/transport/http/binding"
	emptypb "google.golang.org/protobuf/types/known/emptypb"
)

// This is a compile-time assertion to ensure that this generated file
// is compatible with the kratos package it is being compiled against.
var _ = new(context.Context)
var _ = binding.EncodeURL

const _ = http.SupportPackageIsVersion1

const OperationCertificatePermissionServiceCheckPermission = "/lcm.service.v1.CertificatePermissionService/CheckPermission"
const OperationCertificatePermissionServiceGrantPermission = "/lcm.service.v1.CertificatePermissionService/GrantPermission"
const OperationCertificatePermissionServiceListAccessibleCertificates = "/lcm.service.v1.CertificatePermissionService/ListAccessibleCertificates"
const OperationCertificatePermissionServiceListAllPermissions = "/lcm.service.v1.CertificatePermissionService/ListAllPermissions"
const OperationCertificatePermissionServiceListPermissions = "/lcm.service.v1.CertificatePermissionService/ListPermissions"
const OperationCertificatePermissionServiceRevokePermission = "/lcm.service.v1.CertificatePermissionService/RevokePermission"

type CertificatePermissionServiceHTTPServer interface {
	// CheckPermission Check if the authenticated client has permission to access a certificate
	CheckPermission(context.Context, *CheckPermissionRequest) (*CheckPermissionResponse, error)
	// GrantPermission Grant permission to another client to access a certificate
	GrantPermission(context.Context, *GrantPermissionRequest) (*GrantPermissionResponse, error)
	// ListAccessibleCertificates List all certificates accessible to the authenticated client (grants received)
	ListAccessibleCertificates(context.Context, *ListAccessibleCertificatesRequest) (*ListAccessibleCertificatesResponse, error)
	// ListAllPermissions List all permissions across all certificates (admin view)
	ListAllPermissions(context.Context, *ListAllPermissionsRequest) (*ListAllPermissionsResponse, error)
	// ListPermissions List all permissions for a certificate (as owner)
	ListPermissions(context.Context, *ListPermissionsRequest) (*ListPermissionsResponse, error)
	// RevokePermission Revoke a previously granted permission
	RevokePermission(context.Context, *RevokePermissionRequest) (*emptypb.Empty, error)
}

func RegisterCertificatePermissionServiceHTTPServer(s *http.Server, srv CertificatePermissionServiceHTTPServer) {
	r := s.Route("/")
	r.POST("/v1/certificate-permissions", _CertificatePermissionService_GrantPermission0_HTTP_Handler(srv))
	r.DELETE("/v1/certificate-permissions/{certificate_id}/grantees/{grantee_client_id}", _CertificatePermissionService_RevokePermission0_HTTP_Handler(srv))
	r.GET("/v1/certificate-permissions/{certificate_id}", _CertificatePermissionService_ListPermissions0_HTTP_Handler(srv))
	r.GET("/v1/certificate-permissions/accessible", _CertificatePermissionService_ListAccessibleCertificates0_HTTP_Handler(srv))
	r.GET("/v1/certificate-permissions/{certificate_id}/check", _CertificatePermissionService_CheckPermission0_HTTP_Handler(srv))
	r.GET("/v1/certificate-permissions/all", _CertificatePermissionService_ListAllPermissions0_HTTP_Handler(srv))
}

func _CertificatePermissionService_GrantPermission0_HTTP_Handler(srv CertificatePermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in GrantPermissionRequest
		if err := ctx.Bind(&in); err != nil {
			return err
		}
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationCertificatePermissionServiceGrantPermission)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.GrantPermission(ctx, req.(*GrantPermissionRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*GrantPermissionResponse)
		return ctx.Result(200, reply)
	}
}

func _CertificatePermissionService_RevokePermission0_HTTP_Handler(srv CertificatePermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in RevokePermissionRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		if err := ctx.BindVars(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationCertificatePermissionServiceRevokePermission)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.RevokePermission(ctx, req.(*RevokePermissionRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*emptypb.Empty)
		return ctx.Result(200, reply)
	}
}

func _CertificatePermissionService_ListPermissions0_HTTP_Handler(srv CertificatePermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in ListPermissionsRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		if err := ctx.BindVars(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationCertificatePermissionServiceListPermissions)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.ListPermissions(ctx, req.(*ListPermissionsRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*ListPermissionsResponse)
		return ctx.Result(200, reply)
	}
}

func _CertificatePermissionService_ListAccessibleCertificates0_HTTP_Handler(srv CertificatePermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in ListAccessibleCertificatesRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationCertificatePermissionServiceListAccessibleCertificates)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.ListAccessibleCertificates(ctx, req.(*ListAccessibleCertificatesRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*ListAccessibleCertificatesResponse)
		return ctx.Result(200, reply)
	}
}

func _CertificatePermissionService_CheckPermission0_HTTP_Handler(srv CertificatePermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in CheckPermissionRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		if err := ctx.BindVars(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationCertificatePermissionServiceCheckPermission)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.CheckPermission(ctx, req.(*CheckPermissionRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*CheckPermissionResponse)
		return ctx.Result(200, reply)
	}
}

func _CertificatePermissionService_ListAllPermissions0_HTTP_Handler(srv CertificatePermissionServiceHTTPServer) func(ctx http.Context) error {
	return func(ctx http.Context) error {
		var in ListAllPermissionsRequest
		if err := ctx.BindQuery(&in); err != nil {
			return err
		}
		http.SetOperation(ctx, OperationCertificatePermissionServiceListAllPermissions)
		h := ctx.Middleware(func(ctx context.Context, req interface{}) (interface{}, error) {
			return srv.ListAllPermissions(ctx, req.(*ListAllPermissionsRequest))
		})
		out, err := h(ctx, &in)
		if err != nil {
			return err
		}
		reply := out.(*ListAllPermissionsResponse)
		return ctx.Result(200, reply)
	}
}

type CertificatePermissionServiceHTTPClient interface {
	// CheckPermission Check if the authenticated client has permission to access a certificate
	CheckPermission(ctx context.Context, req *CheckPermissionRequest, opts ...http.CallOption) (rsp *CheckPermissionResponse, err error)
	// GrantPermission Grant permission to another client to access a certificate
	GrantPermission(ctx context.Context, req *GrantPermissionRequest, opts ...http.CallOption) (rsp *GrantPermissionResponse, err error)
	// ListAccessibleCertificates List all certificates accessible to the authenticated client (grants received)
	ListAccessibleCertificates(ctx context.Context, req *ListAccessibleCertificatesRequest, opts ...http.CallOption) (rsp *ListAccessibleCertificatesResponse, err error)
	// ListAllPermissions List all permissions across all certificates (admin view)
	ListAllPermissions(ctx context.Context, req *ListAllPermissionsRequest, opts ...http.CallOption) (rsp *ListAllPermissionsResponse, err error)
	// ListPermissions List all permissions for a certificate (as owner)
	ListPermissions(ctx context.Context, req *ListPermissionsRequest, opts ...http.CallOption) (rsp *ListPermissionsResponse, err error)
	// RevokePermission Revoke a previously granted permission
	RevokePermission(ctx context.Context, req *RevokePermissionRequest, opts ...http.CallOption) (rsp *emptypb.Empty, err error)
}

type CertificatePermissionServiceHTTPClientImpl struct {
	cc *http.Client
}

func NewCertificatePermissionServiceHTTPClient(client *http.Client) CertificatePermissionServiceHTTPClient {
	return &CertificatePermissionServiceHTTPClientImpl{client}
}

// CheckPermission Check if the authenticated client has permission to access a certificate
func (c *CertificatePermissionServiceHTTPClientImpl) CheckPermission(ctx context.Context, in *CheckPermissionRequest, opts ...http.CallOption) (*CheckPermissionResponse, error) {
	var out CheckPermissionResponse
	pattern := "/v1/certificate-permissions/{certificate_id}/check"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationCertificatePermissionServiceCheckPermission))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "GET", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// GrantPermission Grant permission to another client to access a certificate
func (c *CertificatePermissionServiceHTTPClientImpl) GrantPermission(ctx context.Context, in *GrantPermissionRequest, opts ...http.CallOption) (*GrantPermissionResponse, error) {
	var out GrantPermissionResponse
	pattern := "/v1/certificate-permissions"
	path := binding.EncodeURL(pattern, in, false)
	opts = append(opts, http.Operation(OperationCertificatePermissionServiceGrantPermission))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "POST", path, in, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// ListAccessibleCertificates List all certificates accessible to the authenticated client (grants received)
func (c *CertificatePermissionServiceHTTPClientImpl) ListAccessibleCertificates(ctx context.Context, in *ListAccessibleCertificatesRequest, opts ...http.CallOption) (*ListAccessibleCertificatesResponse, error) {
	var out ListAccessibleCertificatesResponse
	pattern := "/v1/certificate-permissions/accessible"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationCertificatePermissionServiceListAccessibleCertificates))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "GET", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// ListAllPermissions List all permissions across all certificates (admin view)
func (c *CertificatePermissionServiceHTTPClientImpl) ListAllPermissions(ctx context.Context, in *ListAllPermissionsRequest, opts ...http.CallOption) (*ListAllPermissionsResponse, error) {
	var out ListAllPermissionsResponse
	pattern := "/v1/certificate-permissions/all"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationCertificatePermissionServiceListAllPermissions))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "GET", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// ListPermissions List all permissions for a certificate (as owner)
func (c *CertificatePermissionServiceHTTPClientImpl) ListPermissions(ctx context.Context, in *ListPermissionsRequest, opts ...http.CallOption) (*ListPermissionsResponse, error) {
	var out ListPermissionsResponse
	pattern := "/v1/certificate-permissions/{certificate_id}"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationCertificatePermissionServiceListPermissions))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "GET", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}

// RevokePermission Revoke a previously granted permission
func (c *CertificatePermissionServiceHTTPClientImpl) RevokePermission(ctx context.Context, in *RevokePermissionRequest, opts ...http.CallOption) (*emptypb.Empty, error) {
	var out emptypb.Empty
	pattern := "/v1/certificate-permissions/{certificate_id}/grantees/{grantee_client_id}"
	path := binding.EncodeURL(pattern, in, true)
	opts = append(opts, http.Operation(OperationCertificatePermissionServiceRevokePermission))
	opts = append(opts, http.PathTemplate(pattern))
	err := c.cc.Invoke(ctx, "DELETE", path, nil, &out, opts...)
	if err != nil {
		return nil, err
	}
	return &out, nil
}
